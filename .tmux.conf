########## PYWAL INTEGRATION ##########

# Convert pywal shell colors into tmux-readable file
run-shell "cat ~/.cache/wal/colors.sh | sed 's/export //g' > ~/.cache/wal/tmux_colors.conf"

# Load pywal colors
source-file "~/.cache/wal/tmux_colors.conf"

########## GENERAL SETTINGS ##########

set -g mouse on
set -g history-limit 10000
set -g base-index 1
setw -g pane-base-index 1

########## STATUS BAR COLORS ##########

# Main bar background/foreground from pywal
set -g status-style "bg=#{background},fg=#{foreground}"

########## LEFT SIDE ##########
# Show session name (clean, not host)
set -g status-left-length 40
set -g status-left "#[bg=#{color2},fg=#{background}]  #S  #[default]"

########## RIGHT SIDE ##########
# Git branch segment using pywal colors
set -g status-right-length 80

# Git branch script
set -g @git_branch "git rev-parse --abbrev-ref HEAD 2>/dev/null"

set -g status-right "\
#[fg=#{color4}] #(#{@git_branch})\
 #[fg=#{color3}] %H:%M #[fg=#{color5}] %d-%b \
"

########## WINDOW TITLES ##########

# Inactive windows
set -g window-status-style "bg=#{background},fg=#{color7}"

# Active window
set -g window-status-current-style "bg=#{color1},fg=#{background}"

# Window format
setw -g window-status-format " #[fg=#{color7}]#I:#W "
setw -g window-status-current-format " #[fg=#{background},bg=#{color1}]#I:#W "

########## PANE BORDER COLORS ##########

set -g pane-border-style "fg=#{color8}"
set -g pane-active-border-style "fg=#{color4}"

########## COPY MODE ##########

bind -T copy-mode-vi y send -X copy-selection-and-cancel
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi r send -X rectangle-toggle

########## RELOAD ##########

bind r source-file ~/.tmux.conf \; display "Reloaded tmux.conf"
